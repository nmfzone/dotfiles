#################### NginX Server SettingUp Aliases ####################
symlinkstheserver() {
	sudo ln -sf ~/Programming/PHP/MyServer/* /var/www
	sudo chmod -R g+w /var/www
	sudo chown -R $USER:$USER /var/www
}
laravelnewserver() {
	if [[ -z $1 ]] ; then
		echo "Masukan Nama File!"
	elif [[ -z $2 ]] ; then
		echo "Masukan Lokasi Projectnya! (/var/www/the_folder/public)"
	else
		symlinkstheserver
		sudo cp /etc/nginx/sites-available/laravel-default /etc/nginx/sites-available/$1.nmflocal
		sudo ln -s /etc/nginx/sites-available/$1.nmflocal /etc/nginx/sites-enabled/$1.nmflocal
		sudo sed -i 's|the_folder|'"$2"'|g' /etc/nginx/sites-available/$1.nmflocal
		sudo sed -i 's/the_server/'"$1"'/g' /etc/nginx/sites-enabled/$1.nmflocal
		sudo echo '127.0.0.1   '"$1"'.nmflocal.io' | sudo tee --append /etc/hosts > /dev/null
		sudo service nginx restart > /dev/null 2>&1
		sudo service php5-fpm restart > /dev/null 2>&1
		echo "New Laravel Server configuration for '$1.nmflocal.io' has been created!"
	fi
}
phpnewserver() {
	if [[ -z $1 ]] ; then
		echo "Masukan Nama Server!"
	elif [[ -z $2 ]] ; then
		echo "Masukan Lokasi Projectnya! (/var/www/the_folder/)"
	else
		symlinkstheserver
		sudo cp /etc/nginx/sites-available/php-default /etc/nginx/sites-available/$1.nmflocal
		sudo ln -s /etc/nginx/sites-available/$1.nmflocal /etc/nginx/sites-enabled/$1.nmflocal
		sudo sed -i 's|the_folder|'"$2"'|g' /etc/nginx/sites-available/$1.nmflocal
		sudo sed -i 's/the_server/'"$1"'/g' /etc/nginx/sites-available/$1.nmflocal
		sudo echo '127.0.0.1   '"$1"'.nmflocal.io' | sudo tee --append /etc/hosts > /dev/null
		sudo service nginx restart > /dev/null 2>&1
		sudo service php5-fpm restart > /dev/null 2>&1
		echo "New PHP Server configuration for '$1.nmflocal.io' has been created!"
	fi
}
wordpressnewserver() {
	if [[ -z $1 ]] ; then
		echo "Masukan Nama Server!"
	elif [[ -z $2 ]] ; then
		echo "Masukan Lokasi Projectnya! (/var/www/the_folder/)"
	else
		symlinkstheserver
		sudo cp /etc/nginx/sites-available/wordpress-default /etc/nginx/sites-available/$1.nmflocal
		sudo ln -s /etc/nginx/sites-available/$1.nmflocal /etc/nginx/sites-enabled/$1.nmflocal
		sudo sed -i 's|the_folder|'"$2"'|g' /etc/nginx/sites-available/$1.nmflocal
		sudo sed -i 's/the_server/'"$1"'/g' /etc/nginx/sites-available/$1.nmflocal
		sudo echo '127.0.0.1   '"$1"'.nmflocal.io' | sudo tee --append /etc/hosts > /dev/null
		sudo service nginx restart > /dev/null 2>&1
		sudo service php5-fpm restart > /dev/null 2>&1
		echo "New Wordpress Server configuration for '$1.nmflocal.io' has been created!"
	fi
}
edittheserver() {
	if [[ -z $1 ]] ; then
		echo "Masukan Nama Server!"
	else
		sudo subl /etc/nginx/sites-available/$1.nmflocal
	fi
}
removetheserver() {
	if [[ -z $1 ]] ; then
		echo "Masukan Nama Server!"
	else
		sudo rm /etc/nginx/sites-available/$1.nmflocal
		sudo rm /etc/nginx/sites-enabled/$1.nmflocal
		sudo sed -i '/127.0.0.1   '"$1"'.nmflocal.io/d' /etc/hosts > /dev/null
		sudo service nginx restart > /dev/null 2>&1
		sudo service php5-fpm restart > /dev/null 2>&1
		echo "Server configuration for '$1.nmflocal.io' has been deleted!"
	fi
}
#refreshMyServerSymlinks()
#{
#	sudo
#}


#################### Another Complex Function ####################

github_user_main=(nmfzone)
github_organization_list=(UiiLabsDev)

contains() {
    local seeking=$1
    local in=2
    local isOrg=2
    for element in ${github_user_main[*]}; do
        if [[ $element == $seeking ]]; then
            in=0
            isOrg=1
            break
        fi
    done
    if [ $isOrg = "2" ]; then
    	for element in ${github_organization_list[*]}; do
        if [[ $element == $seeking ]]; then
            in=1
            break
        fi
    done
    fi
    echo $in
}
createNewGithubRepository() {
	username=$1
	repo_name=$2
	repo_desc=$3
	desc_lang=$4

	dir_name=`basename $(pwd)`
	check_username=`contains $username`
	invalid_credentials=0

	if [ "$1" = "-h" ]; then
		echo "-1	Github Username"
		echo "-2	Nama Repository"
		echo "-3	Deskripsi Repository"
		echo "-4	Bahasa dari deskripsi yang dimasukkan (Default: en)"
		invalid_credentials=1
	fi

	if [ "$invalid_credentials" == "1" ]; then
		return 1
	fi

	if [ $check_username = "0" ] || [ $check_username = "1" ]; then
		acc_type=$check_username
	elif [ "$username" = "-" ] || [ "$username" = "" ]; then
		username=`git config user.name`
		if [ "$username" = "" ]; then
			echo "Could not find username, run 'git config --global user.name <username>'"
			invalid_credentials=1
		fi
	else
		echo "Username doesn't exist in the list."
		invalid_credentials=1
	fi

	token=`git config user.token`
	if [ "$token" = "" ]; then
		echo "Could not find token, run 'git config --global user.token <token>'"
		invalid_credentials=1
	fi

	if [ "$invalid_credentials" == "1" ]; then
		return 1
	fi

	if [ "$repo_name" = "-" ] || [ "$repo_name" = "" ]; then
		repo_name=$dir_name
	fi

	if [ "$repo_desc" = "-" ] || [ "$repo_desc" = "" ]; then
		repo_desc="Github Repository by me"
	fi

	if [ "$desc_lang" = "-" ] || [ "$desc_lang" = "" ]; then
		desc_lang="en"
	fi

	if [ ! -f .gitignore ]; then
		cp ~/Programming/Github/Defaults/.gitignore .gitignore
	fi
	if [ ! -f README.md ]; then
		cp ~/Programming/Github/Defaults/README.md README.md
		if [ "$desc_lang" = "en" ]; then
			echo "$repo_name is $repo_desc" >> README.md > /dev/null 2>&1
		elif [ "$desc_lang" = "id" ]; then
			echo "$repo_name merupakan repository yang berisi $repo_desc" >> README.md > /dev/null 2>&1
		elif [ "$desc_lang" = "-blank" ]; then
			echo "$repo_desc" >> README.md > /dev/null 2>&1
		fi
	fi

	echo -n "Creating Github repository '$repo_name' ..."
	if [ "$acc_type" = "0" ]; then
		curl -u "$username:$token" https://api.github.com/user/repos -d '{"name":"'$repo_name'", "description":"'$repo_desc'"}' > /dev/null 2>&1
	elif [ "$acc_type" = "1" ]; then
		curl -u "$username:$token" https://api.github.com/orgs/$username/repos -d '{"name":"'$repo_name'", "description":"'$repo_desc'"}' > /dev/null 2>&1
	fi
	echo " done."

	echo -n "Pushing local code to remote ..."
	git init > /dev/null 2>&1
	git add . > /dev/null 2>&1
	git commit -m "First commit" > /dev/null 2>&1
	git remote add origin git@github.com:$username/$repo_name.git > /dev/null 2>&1
	git push -u origin master > /dev/null 2>&1
	echo " done."
}
